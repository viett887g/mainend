<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>üé• Processed Video</title>
    <style>
        table {
            border-collapse: collapse;
            width: 60%;
        }
        th, td {
            padding: 8px;
            border: 1px solid #ccc;
            text-align: center;
        }
    </style>
    <script>
        function calculateTotal() {
            const labels = ['Apple', 'Chilli', 'Lemon', 'Tomato'];
            let total = 0;

            labels.forEach(label => {
                const price = parseFloat(document.getElementById("price_" + label).value) || 0;
                const quantity = parseInt(document.getElementById("count_" + label).textContent) || 0;
                total += price * quantity;
            });

            document.getElementById("total-amount").innerText = "üí∞ T·ªïng ti·ªÅn: " + total.toLocaleString('vi-VN') + " VND";
        }
    </script>
</head>
<body>
    <h2>üé• Processed Video</h2>
    <video width="720" controls autoplay>
        <source src="{{ url_for('static', filename=video_file) }}" type="video/mp4">
        Your browser does not support the video tag.
    </video>

    <h3>üìä Detection Summary & Pricing:</h3>
    <form onsubmit="event.preventDefault(); calculateTotal();">
        <table>
            <thead>
                <tr>
                    <th>T√™n s·∫£n ph·∫©m</th>
                    <th>S·ªë l∆∞·ª£ng</th>
                    <th>ƒê∆°n gi√° (VND)</th>
                </tr>
            </thead>
            <tbody>
                {% for label in ['Apple', 'Chilli', 'Lemon', 'Tomato'] %}
                <tr>
                    <td><strong>{{ label }}</strong></td>
                    <td id="count_{{ label }}">{{ label_counts[label] if label in label_counts else 0 }}</td>
                    <td>
                        <input type="number" id="price_{{ label }}" placeholder="Nh·∫≠p ƒë∆°n gi√°" min="0">
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
        <br>
        <button type="submit">T√≠nh t·ªïng ti·ªÅn</button>
    </form>

    <h3 id="total-amount">üí∞ T·ªïng ti·ªÅn: -</h3>
    <br><a href="/">‚Üê Quay v·ªÅ trang ch√≠nh</a>
</body>
</html>
